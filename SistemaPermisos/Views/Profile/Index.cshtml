@model SistemaPermisos.ViewModels.ProfileViewModel

@{
    ViewData["Title"] = "Mi Perfil";
}

<div class="container mt-4">
    <h2 class="mb-4">Mi Perfil</h2>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success" role="alert">
            @TempData["SuccessMessage"]
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger" role="alert">
            @TempData["ErrorMessage"]
        </div>
    }

    <div class="card">
        <div class="card-header">
            Información del Usuario
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 text-center">
                    @if (!string.IsNullOrEmpty(Model.FotoPerfilUrl))
                    {
                        <img src="@Model.FotoPerfilUrl" alt="Foto de Perfil" class="img-fluid rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;">
                    }
                    else
                    {
                        <img src="/images/default-profile.png" alt="Foto de Perfil por defecto" class="img-fluid rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;">
                    }
                    <h4>@Model.Nombre @Model.Apellidos</h4>
                    <p class="text-muted">@@@Model.NombreUsuario</p>
                </div>
                <div class="col-md-8">
                    <dl class="row">
                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Email)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Email)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Rol)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Rol)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Cedula)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Cedula)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Puesto)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Puesto)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Telefono)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Telefono)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Departamento)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Departamento)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Direccion)</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Direccion)</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.FechaNacimiento)</dt>
                        <dd class="col-sm-8">@Model.FechaNacimiento?.ToString("dd/MM/yyyy")</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.FechaRegistro)</dt>
                        <dd class="col-sm-8">@Model.FechaRegistro.ToString("dd/MM/yyyy HH:mm")</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.UltimoAcceso)</dt>
                        <dd class="col-sm-8">@Model.UltimoAcceso?.ToString("dd/MM/yyyy HH:mm")</dd>

                        <dt class="col-sm-4">@Html.DisplayNameFor(model => model.Activo)</dt>
                        <dd class="col-sm-8">@(Model.Activo ? "Sí" : "No")</dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="card-footer text-right">
            <a asp-action="Edit" class="btn btn-primary">Editar Perfil</a>
            <a asp-action="ChangePassword" class="btn btn-secondary">Cambiar Contraseña</a>
            <a asp-action="Activity" class="btn btn-info">Ver Actividad</a>
        </div>
    </div>
</div>
